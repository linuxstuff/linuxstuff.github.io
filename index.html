<h1>Chef ...</h1>

<p><strong>ignore_failure during converge phase</strong></p>

<blockquote>
<pre><code>gem_package "syntax" do
action :install
ignore_failure true
end
</code></pre>
</blockquote>

<hr />

<p><strong>Guards example</strong> </p>

<blockquote>
<pre><code>template "/tmp/somefile" do
mode '0644'
source "somefile.erb"
not_if do
  File.exists?("/etc/passwd")
end
end
</code></pre>
</blockquote>

<hr />

<p><strong>Lazy Attribute Evaluation</strong></p>

<blockquote>
  <p>template "template_name" do
 path lazy { " some Ruby code " }
end
 * the Ruby code will be evaluated in the execution phase</p>
</blockquote>

<p><strong>Steps in chef-cliet run</strong></p>

<ul>
<li>http://docs.getchef.com/essentials<em>nodes</em>chef_run.html </li>
<li><strong>Get configuration data</strong>:  local client.rb file + ohai </li>
<li><strong>Authenticate to the Chef Server</strong>: RSA priv key + node name against chef API</li>
<li><strong>Get, rebuild the node object</strong>: node object is rebuild </li>
<li><strong>Expand the run-list</strong>: ..</li>
<li><strong>Synchronize cookbooks</strong>: gets the list of cookbooks, compare with existing files in cache. Chef client is able to request the cookbooks at the beginning</li>
<li><strong>Reset node attributes</strong>: All attributes in the rebuilt node object are updated with the attribute data according to attribute precedence</li>
<li><strong>Compile the resource collection</strong>: "The chef-client identifies each resource in the node object and builds the resource collection....Finally, all recipes are loaded in the order specified by the expanded run-list." </li>
<li><strong>Converge the node</strong>: "Each resource is executed in the order identified by the run-list, and then by the order in which each resource is listed in each recipe."</li>
<li><strong>Update the node object, process exception and report handlers</strong>: "chef-client updates the node object on the Chef server with the node object that was built during this chef-client run...exception and report handlers are executed"</li>
<li><strong>Stop, wait for the next run</strong> </li>
</ul>

<hr />
